<!DOCTYPE html><html><head><title>Calvin and Hobbes Animation</title>

<link rel="stylesheet" type="text/css" href="style.css">
<link rel="shortcut icon" href="favicon.ico">

</head>

<body>
	<center>

		<table style="position:absolute; left:10px; top:10px; background-color:black;">
			<td>
				<a href="#popup1"><img title="Information" src="../jdgmiles.github.io/questionmark.png" style="width:60px; height:60px"></a><br>
				<a href="https://twitter.com/jimdgmiles" target=blank_><img title="James Miles on Twitter" src="../jdgmiles.github.io/twitter.png" style="width:60px; height:60px"></a><br>
				<a href="http://jdgmiles.github.io/" target="_blank"><img title="Projects Page" src="../jdgmiles.github.io/jdgm.png" style="width:60px; height:60px"></a><br>
			</td>
		</table>

		<div id="popup1" class="overlay">
			<div class="popup">
				<a class="close" style="right: 30px;" href="#">&times;</a>
				<div style="font-family:Georgia; color:white; text-align:center; text-decoration:underline; font-size:38px">Calvin and Hobbes Animation</div>
				<span style="font-family:Georgia; font-size:30px; color:white; text-align:justify;"><br>A simple animation featuring my favourite comic strip characters.<br></span><br><br>
			</div>
		</div>

		<canvas id="canvas" style="padding:0px 80px 0px 80px;"></canvas>
  </center>
</body>
</html>

<script type="text/javascript">
var field={width:590, height:270};
var fieldcolor="white";
var time=0;
var fps=65;
var totalframes=1120;
var fighting=new Image();
fighting.src="Fighting.png";
var laughing=new Image();
laughing.src="Laughing.png";
var sleeping=new Image();
sleeping.src="Sleeping.png";

var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d");

canvas.width = field.width;
canvas.height = field.height;

function draw(){

if(time<180){
	ctx.fillStyle=fieldcolor;
	roundRect(ctx, 0, 0, field.width, field.height, 60, true);
	ctx.save();
	ctx.translate(70+2*time,130);
	ctx.rotate(0.065*time+3);
	ctx.drawImage(fighting, -100, -102);
	ctx.restore();
}

if(time>179 && time<240){
	ctx.fillStyle="black";
	ctx.fillRect(0, 0, field.width, field.height);
	ctx.fillStyle=fieldcolor;
	roundRect(ctx, 3*time-540, 0, 540+field.width-3*time, field.height, 60, true);
	ctx.save();
	ctx.globalAlpha=(240-time)/60;
	ctx.translate(70+360,130);
	ctx.rotate(0.065*180+3);
	ctx.drawImage(fighting, -100, -102);
	ctx.restore();
}

if(time>239 && time<293){
	ctx.fillStyle="black";
	ctx.fillRect(0, 0, field.width, field.height);
	ctx.fillStyle=fieldcolor;
	roundRect(ctx, 3*time-540, 0, 540+field.width-3*time, field.height, 60, true);
}

if(time>292 && time<460){
	ctx.fillStyle="black";
	ctx.fillRect(0, 0, field.width, field.height);
	ctx.fillStyle=fieldcolor;
	roundRect(ctx, 3*292-540, 0, 540+field.width-3*292, field.height, 60, true);
}

if(time>459 && time<500){
	ctx.fillStyle="black";
	ctx.fillRect(0, 0, field.width, field.height);
	ctx.fillStyle=fieldcolor;
	roundRect(ctx, 3*292-540, time-460, 540+field.width-3*292, 920+field.height-(2*time), 60, true);
}

if(time>499 && time<800){
	ctx.fillStyle="black";
	ctx.fillRect(0, 0, field.width, field.height);
	ctx.fillStyle=fieldcolor;
	roundRect(ctx, 3*292-540, 499-460, 540+field.width-3*292, 920+field.height-(2*499), 60, true);
}

if(time>799 && time<1050){
	ctx.fillStyle="black";
	ctx.fillRect(0, 0, field.width, field.height);
	ctx.fillStyle=fieldcolor;
	roundRect(ctx, 336-Math.floor(336*(time-800)/249), 39-Math.floor(39*(time-800)/249), 540+field.width-3*292+Math.floor(336*(time-800)/249), field.height-78+Math.floor(78*(time-800)/249), 60, true);
}

if(time>1049 && time<totalframes){
	ctx.fillStyle="black";
	ctx.fillRect(0, 0, field.width, field.height);
	ctx.fillStyle=fieldcolor;
	roundRect(ctx, 0, 0, field.width, field.height, 60, true);
}

if(time>259 && time<360){
	ctx.save();
	ctx.globalAlpha=(time-260)/100;
	ctx.translate(70+360,130);
	ctx.drawImage(laughing, -70, -55);
	ctx.restore();
}

if(time>359 && time<460){
	ctx.save();
	ctx.translate(70+360,130);
	ctx.drawImage(laughing, -70, -55);
	ctx.restore();
}

if(time>459 && time<520){
	ctx.save();
	ctx.globalAlpha=(520-time)/60;
	ctx.translate(70+360,130);
	ctx.drawImage(laughing, -70, -55);
	ctx.restore();
}

if(time>539 && time<640){
	ctx.save();
	ctx.globalAlpha=(time-540)/100;
	ctx.translate(70+360,160);
	ctx.drawImage(sleeping, -78, -63);
	ctx.restore();
}

if(time>639 && time<800){
	ctx.save();
	ctx.translate(70+360,160);
	ctx.drawImage(sleeping, -78, -63);
	ctx.restore();
}

if(time>799 && time<1000){
	ctx.save();
	ctx.globalAlpha=(999-time)/200;
	ctx.translate(70+360,160);
	ctx.drawImage(sleeping, -78, -63);
	ctx.restore();
}

time++;

if(time>totalframes){time=0;}

setTimeout(draw, Math.floor(1000/fps));

}

function roundRect(ctx, x, y, width, height, radius, fill, stroke) {
  if (typeof stroke == 'undefined') {
    stroke = true;
  }
  if (typeof radius === 'undefined') {
    radius = 5;
  }
  if (typeof radius === 'number') {
    radius = {tl: radius, tr: radius, br: radius, bl: radius};
  } else {
    var defaultRadius = {tl: 0, tr: 0, br: 0, bl: 0};
    for (var side in defaultRadius) {
      radius[side] = radius[side] || defaultRadius[side];
    }
  }
  ctx.beginPath();
  ctx.moveTo(x + radius.tl, y);
  ctx.lineTo(x + width - radius.tr, y);
  ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);
  ctx.lineTo(x + width, y + height - radius.br);
  ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);
  ctx.lineTo(x + radius.bl, y + height);
  ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);
  ctx.lineTo(x, y + radius.tl);
  ctx.quadraticCurveTo(x, y, x + radius.tl, y);
  ctx.closePath();
  if (fill) {
    ctx.fill();
  }
  if (stroke) {
    ctx.stroke();
  }

}

fighting.onload = draw();

</script>
